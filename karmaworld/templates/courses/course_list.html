{% extends "base.html" %}
{% load url from future %}

{% block title %}
  Share College Course Notes
{% endblock %}

{% block pagestyle %}
<link rel="stylesheet" type="text/css" media="all" href="{{ STATIC_URL }}css/home.css">
<link rel="stylesheet" href="{{ STATIC_URL }}css/responsive-tables.css">
<link rel="stylesheet" href="{{ STATIC_URL }}css/datatables-css/jquery.dataTables.css"> <!-- dataTables -->
{% endblock %}

{% block pagescripts %}
<script src="{{ STATIC_URL }}js/bootstrap-modal.js" ></script>
<script src="{{ STATIC_URL }}js/jquery.dataTables.js"></script>
<script>
$(document).ready(function() {
  $('#course_list').dataTable({
    // remove the default filter label
    'oLanguage': {
      'sSearch': '',
    },
    // don't provide a option for the user to change the table page length
    'bLengthChange': false,
    // sepcify the number of rows in a page
    'iDisplayLength': 20,
    // Position the filter bar at the top
    'sDom': '<"top"f>rt<"bottom"p><"clear">', 
    // Specify options for each column
    'aoColumns': [
      null,
      null,
      null,
      { "bSearchable": false },
      { "bSearchable": false },
    ],
    // Initial sorting
    'aaSorting': [[3,'desc']]
    // Use out Ajax endpoing to populate the list
    //'sAjaxSource': "{% url 'api_course_list' %}" 
  });
$('.dataTables_filter input').attr("placeholder", "Search for a class");
});
</script>
{% endblock %}

{% block lightboxen %}
  {% include 'lightbox/add_course.html' %}
{% endblock %}

{% block content %}
<section id="home_content">
  <div id="page_header" class="hero_gradient_bar">
    <div class="row">
      <div id="subhead" class="twelve columns">
        <div class="row">
          Share and access a growing database of college lecture notes
        </div>
        <div class="row">
          <div id="page_instruction" class="twelve columns center">
            Choose a course to browse or upload
          </div> 
        </div> <!-- .row -->
      </div><!-- #subhead -->
    </div> <!-- .row -->
  </div> <!-- #page_header -->
  <div class="row">
    <div class="ten columns offset-by-one">
      <!-- Main course table -->
      <table id="course_list" class="responsive">
        <!-- specify col widths -->
        <colgroup> 
          <col span="1" style="width: 18%">
          <col span="1" style="width: 40%">
          <col span="1" style="width: 15%">
          <col span="1" style="width: 5%">
          <col span="1" style="width: 22%">
        </colgroup>
        <thead>
          <tr>
            <th> School </th>
            <th> Course Name </th>
            <th> Instructor </th>
            <th> Notes </th>
            <th> Last Updated </th>
          </tr>
        </thead>
        <tbody>
        {% for course in object_list %}
          <tr>
            <td> {{ course.school.name }} </td>
            <td> <a href="{{ course.get_absolute_url }}">{{ course.name }}</a> </td>
            <td> {{ course.instructor_name }} </td>
            <td> {{ course.file_count }} </td>
            <td> {{ course.updated_at|date:"gA // D M d o" }} </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div><!-- .ten columns -->
  </div> <!-- .row -->
  <div class="row">
    <div class="ten columns offset-by-one">
      <p class="text">Can't find your course? 
        <a href="#add-course" role="button" class="btn" data-toggle="modal">Add it now</a>
      </p>
    </div><!-- .ten columns -->
  </div> <!-- .row -->
</section> <!-- #results_content -->

{% endblock %}
