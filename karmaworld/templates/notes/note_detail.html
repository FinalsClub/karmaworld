{% extends "base.html" %}
{% load url from future %}

{% block title %}
  {{ note.name }}
{% endblock %}

{% block pagestyle %}
  <link rel="stylesheet" type="text/css" media="all" href="{{ STATIC_URL }}css/note_course_pages.css">
{% endblock %}

{% block pagescripts %}
  <script src="{{ STATIC_URL }}js/note-iframe.js" ></script>
{% endblock %}

{% block content %}
  <section id="note_content">

    <div id="note_header" class="hero_gradient_bar">
      <div class="row">
        <div id="note_back_to_course" class="twelve columns">
          <a href="{{note.course.get_absolute_url}}">
            <i class="fa fa-arrow-left"></i>&nbsp;back to {{ note.course.name }}
          </a>
        </div>
      </div>

      <div class="row">
        <div id="note_name" class="twelve columns">
          {{ note.name }}
          <hr/>
        </div><!-- /note_name -->
      </div>

      <div id="social-buttons" class="row">
        <div class="small-4 columns small-centered show-for-medium-up">
          <div class="row">
            <div class="small-4 columns center">
              <script type="text/javascript" src="http://www.reddit.com/static/button/button2.js"></script>
            </div>
            <div class="small-4 columns center">
              <div class="g-plusone"
                   data-href="https://karmanotes.org{% url 'note_detail' note.course.school.slug note.course.slug note.slug %}"
                   data-size="tall"
                   data-annotation="bubble"
                   data-width="25"></div>
              </div>
              <div class="small-4 columns center">
                <div class="fb-like"
                     data-href="https://karmanotes.org{% url 'note_detail' note.course.school.slug note.course.slug note.slug %}"
                     data-width="12"
                     data-layout="box_count"
                     data-action="recommend"
                     data-show-faces="false"
                     data-share="true"></div>
              </div>
            </div>
          </div>
        </div><!-- /note_actions -->
      </div>

      <div class="row zoom-buttons">
        <div class="small-2 small-centered columns center" style="padding-bottom: 20px;">
          <i id="minus-btn" class="fa fa-search-minus fa-2x" style="margin-right: 10px; cursor: pointer"></i>
          <i id="plus-btn" class="fa fa-search-plus fa-2x" style="cursor: pointer"></i>
        </div>
      </div>

    </div><!-- /course_header -->
    <div id="note_container">
      {% if pdf or ppt %}
        <!-- Add pdf.js -->
        <div class="row">
          <div class="small-12 columns">
            <iframe
                style="border:none; width:100%; min-height: 700px; margins: auto;"
                id="noteframe"
                src="/pdfview/{{ note.id }}"
                onload="autoResize('noteframe')"> </iframe>
          </div>
        </div> <!-- .row -->

        {% comment %}
        # TODO: embed and pass the url with this included when we fix the css integration issues
        {% include 'partial/pdfembed.html' %}
        {% endcomment %}

      {% else %} {# if pdf #}

      <div class="row">
        <div class="small-12 small-centered columns medium-12 large-12 body_copy">
          {% if note.html %}
            <div class="note-text">
              <iframe style="border:none; width:100%; min-height: 1000px;" id="noteframe" src="/raw/{{ note.id }}" onload="autoResize('noteframe')"> </iframe>
            </div> <!-- .note-text -->

          {% else %} {# note.html #}
            <div class="note-error">
              This document's content is currently unavailable. Please try again later.
            </div>
          {% endif %} {# note.html #}

      {% endif %} {# note.filetype == 'pdf' #}

        </div><!-- /body_copy -->
      </div>

    </div><!-- /note_container -->


  </section><!--/note_content-->

{% endblock %}


{% block bodyscripts %}
  <!-- for facebook button -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=271212543025990";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <!-- for Google Plus button -->
  <script type="text/javascript">
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js?onload=onLoadCallback';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
{% endblock %}